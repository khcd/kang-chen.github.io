---
// src/pages/projects/index.astro
import Layout from "../../layouts/Layout.astro"

const projects = [
	{
		title: "Project One",
		year: 2024,
		image: "https://picsum.photos/id/1/800/600",
		slug: "project-one",
		description:
			"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris.",
	},
	{
		title: "Project Two",
		year: 2024,
		image: "https://picsum.photos/id/2/800/600",
		slug: "project-two",
		description:
			"Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae.",
	},
	{
		title: "Project Three",
		year: 2023,
		image: "https://picsum.photos/id/3/800/600",
		slug: "project-three",
		description:
			"Suspendisse potenti. Cras in purus eu magna vulputate luctus.",
	},
	{
		title: "Project Four",
		year: 2023,
		image: "https://picsum.photos/id/4/800/600",
		slug: "project-four",
		description:
			"Quisque arcu libero, rutrum ac, lobortis vel, dapibus at, diam.",
	},
	{
		title: "Project Five",
		year: 2022,
		image: "https://picsum.photos/id/5/800/600",
		slug: "project-five",
		description: "Vestibulum ac est lacinia nisi venenatis tristique.",
	},
	{
		title: "Project Six",
		year: 2022,
		image: "https://picsum.photos/id/6/800/600",
		slug: "project-six",
		description: "Fusce convallis metus id felis luctus adipiscing.",
	},
	{
		title: "Project Seven",
		year: 2022,
		image: "https://picsum.photos/id/7/800/600",
		slug: "project-seven",
		description:
			"Maecenas tristique, est et tempus semper, est quam pharetra magna.",
	},
	{
		title: "Project Eight",
		year: 2022,
		image: "https://picsum.photos/id/8/800/600",
		slug: "project-eight",
		description: "Donec dapibus. Duis at velit eu est congue elementum.",
	},
]

// Group projects by year
const projectsByYear = projects.reduce((acc, project) => {
	;(acc[project.year] = acc[project.year] || []).push(project)
	return acc
}, {})

// Sort years in descending order
const years = Object.keys(projectsByYear).sort((a, b) => Number(b) - Number(a))
---

<Layout>
	<div class="projects-index">
		<h1>Projects</h1>
		{
			years.map((year) => (
				<section class="year-section">
					<h2>{year}</h2>
					<div class="projects-list">
						{projectsByYear[year].map((project) => (
							<a
								href={`/projects/${project.slug}`}
								class="project-link"
							>
								<article class="project-card">
									<img
										src={project.image}
										alt={project.title}
									/>
									<div class="project-content">
										<h3>{project.title}</h3>
										<p class="description">
											{project.description}
										</p>
									</div>
								</article>
							</a>
						))}
					</div>
				</section>
			))
		}
	</div>
</Layout>

<style>
	.projects-index {
		max-width: 800px;
		margin: 0 auto;
		padding: 2rem 1rem;
	}

	h1 {
		font-size: 2rem;
		font-weight: 500;
		margin-bottom: 1rem;
		color: var(--text-color);
	}

	.year-section {
		margin-bottom: 4rem;
	}

	.year-section h2 {
		font-size: 1.5rem;
		font-weight: 500;
		margin-bottom: 1.5rem;
		color: var(--text-color);
	}

	.projects-list {
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
	}

	.project-link {
		text-decoration: none;
		color: var(--text-color);
	}

	.project-card {
		border-radius: 8px;
		background-color: var(--background-color);
		border: 1px solid var(--border-color, transparent);
		overflow: hidden;
		transition:
			transform 0.2s,
			box-shadow 0.2s;
	}

	.project-card:hover {
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		background-color: var(--card-hover, #f5f5f5);
	}

	.project-card img {
		width: 100%;
		height: 200px;
		object-fit: cover;
		display: block;
	}

	.project-content {
		padding: 1.5rem;
	}

	.project-card h3 {
		font-size: 1.25rem;
		font-weight: 500;
		margin: 0;
		margin-bottom: 0.5rem;
		color: var(--text-color);
	}

	.description {
		font-size: 1rem;
		color: var(--secondary-text, #666);
		margin: 0;
		line-height: 1.5;
	}
</style>
